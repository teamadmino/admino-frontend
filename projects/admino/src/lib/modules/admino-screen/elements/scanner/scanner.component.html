<div class="admino-scanner" [ngStyle]="{height: element.height}">
    <div class="video-wrapper" [ngClass]="{'scanning': this.scanEnabled}">
        <div class="video-inner-wrapper">

            <div class="preloader">
                <mat-spinner *ngIf="showPreloader" [diameter]="30"></mat-spinner>
            </div>
            <div class="overlay">
                <!-- <admino-success-animation *ngIf="successfullScan"></admino-success-animation> -->
                <div class="success-overlay" *ngIf="successfullScan"></div>
                <div class="scanoverlay" *ngIf="scanEnabled"></div>
                <div class="scanline" *ngIf="scanEnabled"></div>
                <div class="scanline scanline2" *ngIf="scanEnabled"></div>
                <!-- <div class="camera-notice" *ngIf="!cameraEnabled">Kamera kikapcsolva</div> -->
                <button class="already-scanned" [ngClass]="{hide: !this.alreadyScanned}" mat-flat-button>Már
                    beolvasva</button>

            </div>

            <zxing-scanner class="video-area" [formats]="allowedFormats" (camerasFound)="camerasFoundHandler($event)"
                (camerasNotFound)="camerasNotFoundHandler($event)" (scanSuccess)="scanSuccessHandler($event)"
                (scanError)="scanErrorHandler($event)" (scanFailure)="scanFailureHandler($event)"
                (scanComplete)="scanCompleteHandler($event)" #scannerRef></zxing-scanner>
            <!-- [enable]="this.cameraEnabled" -->
        </div>

    </div>
    <div class="codes-wrapper">
        <div class="noscan-notice w-100 text-center" *ngIf="getCodes().length<1">Kezdje meg a beolvasást</div>
        <mat-list class="codes pt-0" #codesRef>


            <mat-list-item *ngFor="let code of getCodes();let i=index;"
                [@codeAnimation]="{value:'',params:{startColor:this.directive.ts.accentColor, endColor:'*'}}"
                [ngClass]="{'selected': i===this.selectedId}" (click)="codeClicked(i)">

                <mat-icon class="syncindicator" [ngClass]="{hide: code.synced}">sync_problem</mat-icon>
                <button mat-icon-button (click)="this.showConfirmationId=i" *ngIf=" i===this.selectedId">
                    <mat-icon>delete</mat-icon>
                </button>
                <h2 mat-line class="code"> {{code.code}}</h2>
                <p mat-line class="opacity-70">{{code.date | date:'H:mm:ss'}} </p>

                <div class="confirmation p-3 d-flex align-items-center" *ngIf="this.showConfirmationId===i">
                    Biztosan törli?
                    <div class="flex-grow-1"></div>
                    <button (click)="removeCode(code)" mat-flat-button color="warn">Igen</button>
                    <button (click)="this.showConfirmationId=-1" mat-button>Nem</button>

                </div>
                <mat-divider></mat-divider>
                <!--  -->
            </mat-list-item>


        </mat-list>
    </div>

    <button mat-button class="scanbutton btn-lg pt-4 pb-4 w-100" color="accent"
        [ngClass]="{'scanning': this.scanEnabled}" (mousedown)="enableScan()" (touchstart)="enableScan()"
        (touchend)="disableScan()">
        <span class="label">
            <!-- Beolvasás -->
            <mat-icon [inline]="true">wifi</mat-icon>
        </span>
        <div class="spinner">
            <mat-spinner *ngIf="this.scanEnabled" [diameter]="30" [color]="'foreground'"></mat-spinner>
        </div>


    </button>
</div>